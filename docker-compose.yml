# Docker Compose v3.9+
# This file orchestrates the building and running of the frontend and backend services.

services:
  # The Backend Service (Python/Flask)
  backend:
    build:
      context: ./smart-hospital-Backend
      dockerfile: Dockerfile
    # Use an .env file to securely manage secrets and configuration.
    # Create a file named ".env" in the "smart-hospital-Backend" directory.
    env_file:
      - ./smart-hospital-Backend/.env
    ports:
      - "5000:5000"
    # The container will restart automatically if it crashes.
    restart: unless-stopped

  # The Frontend Service (Nginx)
  frontend:
    build:
      context: ./smart-hospital-Frontend
      dockerfile: Dockerfile
    ports:
      - "8080:80"
    # This ensures the backend starts before the frontend.
    depends_on:
      - backend
    # The container will restart automatically if it crashes.
    restart: unless-stopped